# Workflows Template

Write `docs/workflows.md` at the scan root following this structure.

## File Structure

```markdown
# Application Workflows

> Auto-generated by repo-map. Key application flows documented with Mermaid diagrams.

## {Workflow Name}

{Brief description of the workflow and when it occurs.}

` ` `mermaid
sequenceDiagram
    participant Client
    participant API
    participant Service
    participant Database

    Client->>API: POST /resource
    API->>Service: CreateResource(dto)
    Service->>Database: INSERT
    Database-->>Service: entity
    Service-->>API: Result<ResourceDto>
    API-->>Client: 201 Created
` ` `

### Key Decision Points

- {Description of any branching logic or conditional behavior}

---
```

## Diagram Type Selection

Choose the Mermaid diagram type based on what the workflow represents:

- **`sequenceDiagram`** -- Request flows that cross service/component boundaries. Use for: API request handling, inter-service communication, authentication flows, event-driven message flows.

- **`flowchart`** -- Business logic with conditional branches. Use for: validation pipelines, approval workflows, routing decisions, error handling strategies.

- **`stateDiagram-v2`** -- Entity lifecycle transitions. Use for: order status progression, user account states, document approval states, subscription lifecycle.

## Rules

- One workflow section per significant application flow.
- Prioritize: authentication/authorization flows, core CRUD operations, cross-service interactions, event/message flows, complex business logic.
- Keep each diagram focused on a single flow. Split complex flows into sub-diagrams.
- Label all messages, transitions, and decision branches.
- Include error/failure paths where they are architecturally significant.
